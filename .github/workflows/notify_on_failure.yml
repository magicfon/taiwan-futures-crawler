name: å¤±æ•—é€šçŸ¥

on:
  workflow_run:
    workflows: ["æ¯æ—¥å°æœŸæ‰€è³‡æ–™çˆ¬å–"]
    types:
      - completed

jobs:
  notify-failure:
    runs-on: ubuntu-latest
    if: ${{ github.event.workflow_run.conclusion == 'failure' }}
    
    steps:
    - name: å»ºç«‹å¤±æ•—å ±å‘Š
      run: |
        echo "ğŸš¨ å°æœŸæ‰€çˆ¬èŸ²åŸ·è¡Œå¤±æ•—" > failure_report.txt
        echo "åŸ·è¡Œæ™‚é–“: $(date)" >> failure_report.txt
        echo "å·¥ä½œæµç¨‹: ${{ github.event.workflow_run.name }}" >> failure_report.txt
        echo "åŸ·è¡ŒID: ${{ github.event.workflow_run.id }}" >> failure_report.txt
        echo "åˆ†æ”¯: ${{ github.event.workflow_run.head_branch }}" >> failure_report.txt
        echo "æŸ¥çœ‹è©³æƒ…: ${{ github.event.workflow_run.html_url }}" >> failure_report.txt
        
    - name: è¼¸å‡ºå¤±æ•—è³‡è¨Š
      run: |
        cat failure_report.txt
        echo "::warning::å°æœŸæ‰€çˆ¬èŸ²åŸ·è¡Œå¤±æ•—ï¼Œè«‹æª¢æŸ¥å·¥ä½œæµç¨‹æ—¥èªŒ" 