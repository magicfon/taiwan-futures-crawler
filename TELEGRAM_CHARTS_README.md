# 📊 台期所Telegram圖表推送功能

## 🎯 功能概述

這個功能會在每次成功爬取台期所資料後，自動生成30天持倉分析圖表並推送到您的Telegram。

## 📈 圖表類型

### 1. **總覽圖表**
- 所有契約的持倉分析概覽
- 一次看懂所有契約的趨勢

### 2. **個別契約圖表**
- 每個契約的詳細分析圖表
- 雙軸顯示：
  - **主軸（柱狀圖）**：多空淨額交易口數
  - **副軸（線圖）**：多空淨額未平倉口數

## 🔧 技術實現

### **圖表特色**
- 📊 **雙軸設計**：同時顯示交易量和未平倉量
- 🎨 **顏色區分**：正數綠色、負數紅色
- 📅 **時間範圍**：最近30個交易日
- 📈 **趨勢指標**：顯示最新數據變化方向
- 🏷️ **中文字體**：完美支援繁體中文

### **支援的契約**
- 🔥 **TX** - 臺股期貨
- ⚡ **TE** - 電子期貨  
- 📈 **MTX** - 小型臺指期貨
- 🔬 **ZMX** - 微型臺指期貨
- 🇺🇸 **NQF** - 美國那斯達克100期貨

## 📱 Telegram 設定

### **Bot 資訊**
- **Bot Token**: `7088578241:AAErbP-EuoRGClRZ3FFfPMjl8k3CFpqgn8E`
- **Chat ID**: `1038401606`

### **推送時機**
- ✅ 每日爬取成功後自動推送
- 🔄 包含當天最新資料
- 📊 顯示30天趨勢分析

## 🚀 使用方式

### **自動推送**
系統會在每日下午3:30（台北時間）爬取完成後自動推送圖表

### **手動測試**
```bash
# 測試圖表生成和Telegram發送
python test_telegram_charts.py

# 執行今日爬取（會自動推送圖表）
python taifex_crawler.py --date-range today --contracts TX,TE,MTX
```

### **本地測試圖表**
```bash
# 只生成圖表（不發送）
python chart_generator.py

# 只測試Telegram連線
python telegram_notifier.py
```

## 📊 圖表解讀

### **多空淨額交易口數**（柱狀圖）
- 🟢 **正數**：當日多方力量較強
- 🔴 **負數**：當日空方力量較強
- 📏 **數值大小**：反映當日交易活躍程度

### **多空淨額未平倉口數**（線圖）
- ↗️ **上升趨勢**：多方持倉增加
- ↘️ **下降趨勢**：空方持倉增加
- 🔄 **波動**：反映市場情緒變化

## 🛠️ 故障排除

### **常見問題**

1. **圖表生成失敗**
   ```bash
   pip install matplotlib seaborn numpy
   ```

2. **Telegram發送失敗**
   - 檢查網路連線
   - 確認Bot Token和Chat ID正確
   - 檢查Bot是否被封鎖

3. **中文字體顯示問題**
   - Windows：確保有 Microsoft YaHei 字體
   - Linux：安裝中文字體包
   - macOS：使用 Arial Unicode MS

### **日誌檢查**
```bash
# 查看爬蟲日誌
tail -f taifex_crawler.log

# 查看圖表生成日誌
ls -la charts/
```

## 📈 範例圖表說明

### **TX臺股期貨圖表**
- 顯示三大法人在臺股期貨的持倉變化
- 可觀察大戶動向和市場情緒
- 交易量和持倉量的關聯性分析

### **總覽圖表**
- 一次瀏覽所有契約狀況
- 快速識別異常波動
- 比較不同契約的熱度

## 🔮 未來改進

### **計劃功能**
- 📊 新增技術指標（RSI、MACD）
- 🎯 設定推送條件（異常波動時才推送）
- 📱 支援多個Telegram群組
- 🔔 自定義推送時間
- 📋 互動式查詢功能

### **圖表優化**
- 🎨 更多視覺化樣式
- 📊 3D圖表支援
- 🔍 放大縮小功能
- 💾 歷史圖表存檔

---

## 🎉 開始使用

1. **確認環境**：
   ```bash
   python test_telegram_charts.py
   ```

2. **執行爬取**：
   ```bash
   python taifex_crawler.py --date-range today
   ```

3. **檢查Telegram**：等待圖表推送到您的Telegram

現在您可以每天自動收到台期所的最新持倉分析圖表了！ 📱📊 